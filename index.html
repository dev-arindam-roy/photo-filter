<!DOCTYPE html>
<html lang="en">
<head>
  <title>Arindam Filters</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="loading-bar.css">
  <link rel="stylesheet" href="sweetalert2.min.css">
  <link rel="stylesheet" href="arindam-filters.css">
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
  <script src="pace.min.js"></script>
  <script src="html2canvas.min.js"></script>
  <script src="sweetalert2.all.min.js"></script>
</head>
<body>

    <div class="container mb-5">
        <div class="col-md-8 offset-md-2 mt-5">
            <div class="row mt-3" >
                <div class="col-md-12 text-center">
                    <h2><span class="hey">Hey! I'm</span> <span class="ari">Arindam</span><br/><span class="keytxt">Are you ready to <br/> check <mark>50</mark> filters for your photo.</span></h2>
                </div>
            </div>
            <hr/>
            <div class="row mt-5" id="uploadContainer">
                <div class="col-md-12 text-center">
                    <h3>Upload Your Photo</h3>
                </div>
                <div class="col-md-12 text-center">
                    <form name="frm" id="frm">
                        <label class="btn btn-primary btn-lg" id="photoBtn">
                            <input type="file" id="photo" style="display: none;">
                            Select Photo
                        </label>
                    </form>
                </div>
            </div>
            <div class="row mt-3" id="startAgainContainer" style="display: none;">
                <div class="col-md-12 text-center">
                    <button type="button" id="startAgainBtn" class="btn btn-danger btn-lg">Cancel & Upload Again?</button>
                </div>
            </div>
            <div class="row mt-3" id="originalImageContainer" style="display: none;">
                <div class="col-md-12 text-center">
                    <h4>Your Original Photo</h4>
                    <img id="originalPhoto" class="img-fluid rounded">
                </div>
            </div>
            <div class="row mt-3" id="filterImageContainer" style="display: none;">
                <div class="col-md-12 text-center mb-3">
                    <h4><strong>Filters For Your Photo</strong></h4>
                </div>
                <div class="col-md-12 text-center mb-3">
                    <div class="image-container-1" id="filter1">
                        <img class="filter-image img-fluid rounded">
                    </div>
                    <div class="image-name">Filter - 1</div>
                    <div class="download-box mb-3">
                        <button type="button" class="btn btn-primary btn-sm download-btn" id="filter1">Download</button>
                    </div>
                </div>
                <div class="col-md-12 text-center mb-3">
                    <div class="image-container-2" id="filter2">
                        <img class="filter-image img-fluid rounded">
                    </div>
                    <div class="image-name">Filter - 2</div>
                    <div class="download-box mb-3">
                        <button type="button" class="btn btn-primary btn-sm download-btn" id="filter2">Download</button>
                    </div>
                </div>
                <div class="col-md-12 text-center mb-3">
                    <div class="image-container-3" id="filter3">
                        <img class="filter-image img-fluid rounded">
                    </div>
                    <div class="image-name">Filter - 3</div>
                    <div class="download-box mb-3">
                        <button type="button" class="btn btn-primary btn-sm download-btn" id="filter3">Download</button>
                    </div>
                </div>
                <div class="col-md-12 text-center mb-3">
                    <div class="image-container-4" id="filter4">
                        <img class="filter-image img-fluid rounded">
                    </div>
                    <div class="image-name">Filter - 4</div>
                    <div class="download-box mb-3">
                        <button type="button" class="btn btn-primary btn-sm download-btn" id="filter4">Download</button>
                    </div>
                </div>
                <div class="col-md-12 text-center mb-3">
                    <div class="image-container-5" id="filter5">
                        <img class="filter-image img-fluid rounded">
                    </div>
                    <div class="image-name">Filter - 5</div>
                    <div class="download-box mb-3">
                        <button type="button" class="btn btn-primary btn-sm download-btn" id="filter5">Download</button>
                    </div>
                </div>
                <div class="col-md-12 text-center mb-3">
                    <div class="image-container-6" id="filter6">
                        <img class="filter-image img-fluid rounded">
                    </div>
                    <div class="image-name">Filter - 6</div>
                    <div class="download-box mb-3">
                        <button type="button" class="btn btn-primary btn-sm download-btn" id="filter6">Download</button>
                    </div>
                </div>
                <div class="col-md-12 text-center mb-3">
                    <div class="image-container-7" id="filter7">
                        <img class="filter-image img-fluid rounded">
                    </div>
                    <div class="image-name">Filter - 7</div>
                    <div class="download-box mb-3">
                        <button type="button" class="btn btn-primary btn-sm download-btn" id="filter7">Download</button>
                    </div>
                </div>
                <div class="col-md-12 text-center mb-3">
                    <div class="image-container-8" id="filter8">
                        <img class="filter-image img-fluid rounded">
                    </div>
                    <div class="image-name">Filter - 8</div>
                    <div class="download-box mb-3">
                        <button type="button" class="btn btn-primary btn-sm download-btn" id="filter8">Download</button>
                    </div>
                </div>
                <div class="col-md-12 text-center mb-3">
                    <div class="image-container-9" id="filter9">
                        <img class="filter-image img-fluid rounded">
                    </div>
                    <div class="image-name">Filter - 9</div>
                    <div class="download-box mb-3">
                        <button type="button" class="btn btn-primary btn-sm download-btn" id="filter9">Download</button>
                    </div>
                </div>
                <div class="col-md-12 text-center mb-3">
                    <div class="image-container-10" id="filter10">
                        <img class="filter-image img-fluid rounded">
                    </div>
                    <div class="image-name">Filter - 10</div>
                    <div class="download-box mb-3">
                        <button type="button" class="btn btn-primary btn-sm download-btn" id="filter10">Download</button>
                    </div>
                </div>
                <div class="col-md-12 text-center mb-3">
                    <div class="image-container-11" id="filter11">
                        <img class="filter-image img-fluid rounded">
                    </div>
                    <div class="image-name">Filter - 11</div>
                    <div class="download-box mb-3">
                        <button type="button" class="btn btn-primary btn-sm download-btn" id="filter11">Download</button>
                    </div>
                </div>
                <div class="col-md-12 text-center mb-3">
                    <div class="image-container-12" id="filter12">
                        <img class="filter-image img-fluid rounded">
                    </div>
                    <div class="image-name">Filter - 12</div>
                    <div class="download-box mb-3">
                        <button type="button" class="btn btn-primary btn-sm download-btn" id="filter12">Download</button>
                    </div>
                </div>
                <div class="col-md-12 text-center mb-3">
                    <div class="image-container-13" id="filter13">
                        <img class="filter-image img-fluid rounded">
                    </div>
                    <div class="image-name">Filter - 13</div>
                    <div class="download-box mb-3">
                        <button type="button" class="btn btn-primary btn-sm download-btn" id="filter13">Download</button>
                    </div>
                </div>
                <div class="col-md-12 text-center mb-3">
                    <div class="image-container-14" id="filter14">
                        <img class="filter-image img-fluid rounded">
                    </div>
                    <div class="image-name">Filter - 14</div>
                    <div class="download-box mb-3">
                        <button type="button" class="btn btn-primary btn-sm download-btn" id="filter14">Download</button>
                    </div>
                </div>
                <div class="col-md-12 text-center mb-3">
                    <div class="image-container-15" id="filter15">
                        <img class="filter-image img-fluid rounded">
                    </div>
                    <div class="image-name">Filter - 15</div>
                    <div class="download-box mb-3">
                        <button type="button" class="btn btn-primary btn-sm download-btn" id="filter15">Download</button>
                    </div>
                </div>
                <div class="col-md-12 text-center mb-3">
                    <div class="image-container-16" id="filter16">
                        <img class="filter-image img-fluid rounded">
                    </div>
                    <div class="image-name">Filter - 16</div>
                    <div class="download-box mb-3">
                        <button type="button" class="btn btn-primary btn-sm download-btn" id="filter16">Download</button>
                    </div>
                </div>
                <div class="col-md-12 text-center mb-3">
                    <div class="image-container-17" id="filter17">
                        <img class="filter-image img-fluid rounded">
                    </div>
                    <div class="image-name">Filter - 17</div>
                    <div class="download-box mb-3">
                        <button type="button" class="btn btn-primary btn-sm download-btn" id="filter17">Download</button>
                    </div>
                </div>
                <div class="col-md-12 text-center mb-3">
                    <div class="image-container-18" id="filter18">
                        <img class="filter-image img-fluid rounded">
                    </div>
                    <div class="image-name">Filter - 18</div>
                    <div class="download-box mb-3">
                        <button type="button" class="btn btn-primary btn-sm download-btn" id="filter18">Download</button>
                    </div>
                </div>
                <div class="col-md-12 text-center mb-3">
                    <div class="image-container-19" id="filter19">
                        <img class="filter-image img-fluid rounded">
                    </div>
                    <div class="image-name">Filter - 19</div>
                    <div class="download-box mb-3">
                        <button type="button" class="btn btn-primary btn-sm download-btn" id="filter19">Download</button>
                    </div>
                </div>
                <div class="col-md-12 text-center mb-3">
                    <div class="image-container-20" id="filter20">
                        <img class="filter-image img-fluid rounded">
                    </div>
                    <div class="image-name">Filter - 20</div>
                    <div class="download-box mb-3">
                        <button type="button" class="btn btn-primary btn-sm download-btn" id="filter20">Download</button>
                    </div>
                </div>
                <div class="col-md-12 text-center mb-3">
                    <div class="image-container-21" id="filter21">
                        <img class="filter-image img-fluid rounded">
                    </div>
                    <div class="image-name">Filter - 21</div>
                    <div class="download-box mb-3">
                        <button type="button" class="btn btn-primary btn-sm download-btn" id="filter21">Download</button>
                    </div>
                </div>
                <div class="col-md-12 text-center mb-3">
                    <div class="image-container-22" id="filter22">
                        <img class="filter-image img-fluid rounded">
                    </div>
                    <div class="image-name">Filter - 22</div>
                    <div class="download-box mb-3">
                        <button type="button" class="btn btn-primary btn-sm download-btn" id="filter22">Download</button>
                    </div>
                </div>
                <div class="col-md-12 text-center mb-3">
                    <div class="image-container-23" id="filter23">
                        <img class="filter-image img-fluid rounded">
                    </div>
                    <div class="image-name">Filter - 23</div>
                    <div class="download-box mb-3">
                        <button type="button" class="btn btn-primary btn-sm download-btn" id="filter23">Download</button>
                    </div>
                </div>
                <div class="col-md-12 text-center mb-3">
                    <div class="image-container-24" id="filter24">
                        <img class="filter-image img-fluid rounded">
                    </div>
                    <div class="image-name">Filter - 24</div>
                    <div class="download-box mb-3">
                        <button type="button" class="btn btn-primary btn-sm download-btn" id="filter24">Download</button>
                    </div>
                </div>
                <div class="col-md-12 text-center mb-3">
                    <div class="image-container-25" id="filter25">
                        <img class="filter-image img-fluid rounded">
                    </div>
                    <div class="image-name">Filter - 25</div>
                    <div class="download-box mb-3">
                        <button type="button" class="btn btn-primary btn-sm download-btn" id="filter25">Download</button>
                    </div>
                </div>
                <div class="col-md-12 text-center mb-3">
                    <div class="image-container-26" id="filter26">
                        <img class="filter-image img-fluid rounded">
                    </div>
                    <div class="image-name">Filter - 26</div>
                    <div class="download-box mb-3">
                        <button type="button" class="btn btn-primary btn-sm download-btn" id="filter26">Download</button>
                    </div>
                </div>
                <div class="col-md-12 text-center mb-3">
                    <div class="image-container-27" id="filter27">
                        <img class="filter-image img-fluid rounded">
                    </div>
                    <div class="image-name">Filter - 27</div>
                    <div class="download-box mb-3">
                        <button type="button" class="btn btn-primary btn-sm download-btn" id="filter27">Download</button>
                    </div>
                </div>
                <div class="col-md-12 text-center mb-3">
                    <div class="image-container-28" id="filter28">
                        <img class="filter-image img-fluid rounded">
                    </div>
                    <div class="image-name">Filter - 28</div>
                    <div class="download-box mb-3">
                        <button type="button" class="btn btn-primary btn-sm download-btn" id="filter28">Download</button>
                    </div>
                </div>
                <div class="col-md-12 text-center mb-3">
                    <div class="image-container-29" id="filter29">
                        <img class="filter-image img-fluid rounded">
                    </div>
                    <div class="image-name">Filter - 29</div>
                    <div class="download-box mb-3">
                        <button type="button" class="btn btn-primary btn-sm download-btn" id="filter29">Download</button>
                    </div>
                </div>
                <div class="col-md-12 text-center mb-3">
                    <div class="image-container-30" id="filter30">
                        <img class="filter-image img-fluid rounded">
                    </div>
                    <div class="image-name">Filter - 30</div>
                    <div class="download-box mb-3">
                        <button type="button" class="btn btn-primary btn-sm download-btn" id="filter30">Download</button>
                    </div>
                </div>
                <!--PREVIEW DOWNLOAD IMAGE-->
                <div class="col-md-12 text-center mb-3" id="previewImg"></div>
            </div>
        </div>
    </div>
    <div class="royfoot text-center">
        Developed By: Arindam Roy (9836395513)
    </div>

    <!-- The Modal -->
    <div class="modal" id="downloadModal">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <!-- Modal Header -->
                <div class="modal-header justify-content-center">
                    <h4 class="modal-title text-danger">Oops! I'm very sorry!</h4>
                </div>
                <!-- Modal body -->
                <div class="modal-body">
                    <div class="alert alert-danger">Download option is blocked for this public version.</div> 
                    <div class="text-center">You can take screenshot and save the photos. <br/>Thanks.</div>
                </div>
                <!-- Modal footer -->
                <div class="modal-footer justify-content-center">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

<script>
    $(function () {
        const swalWithBootstrapButtons = Swal.mixin({
            customClass: {
                confirmButton: 'btn btn-primary',
                cancelButton: 'btn btn-danger'
            },
            buttonsStyling: false
        });
        $('body').on('change', '#photo', function () {
            if (this.files && this.files[0]) {
                var _fileName = this.files[0].name;
                var _fileSize = this.files[0].size;
                var _fileExtn = _fileName.split('.').pop().toLowerCase();
                if(_fileExtn == "jpg" || _fileExtn == "png" || _fileExtn == "jpeg") {
                    var reader = new FileReader();
                    reader.onload = function (e) {
                        $("#uploadContainer").hide();
                        $("#startAgainContainer").show();
                        $("#originalImageContainer").show();
                        $("#filterImageContainer").show();
                        $('#originalPhoto').attr('src', e.target.result);
                        $('.filter-image').attr('src', e.target.result);
                    }
                    reader.readAsDataURL(this.files[0]);
                    Swal.fire({
                        title: 'Please wait',
                        html: 'Processing... Your Photo...',
                        allowEscapeKey: false,
                        allowOutsideClick: false,
                        didOpen: () => {
                            Swal.showLoading()
                        }
                    });
                    setTimeout(function() {
                        Swal.close();
                    }, 5000);
                } else {
                    swalWithBootstrapButtons.fire({
                        icon: 'error',
                        title: 'Invalid Image',
                        text: 'Only accept .jpg or .jpeg or .png image',
                        confirmButtonText: 'Try Another',
                        focusConfirm: false
                    });
                }
            }
        });
        $('body').on('click', '#startAgainBtn', function () {
            $("#photo").val('');
            $("#startAgainContainer").hide();
            $("#uploadContainer").show();
            $("#originalImageContainer").hide();
            $("#filterImageContainer").hide();
        });
        // $('body').on('click', '.download-btn', function () {
        //     $("#previewImg").html('');
        //     Swal.fire({
        //         title: 'Please wait',
        //         html: 'Preparing download...',
        //         allowEscapeKey: false,
        //         allowOutsideClick: false,
        //         didOpen: () => {
        //             Swal.showLoading()
        //         }
        //     });
        //     setTimeout(function() {
        //         Swal.close();
        //     }, 3000);
        //     var _filterId = $(this).attr('id');
        //     html2canvas(document.getElementById(_filterId), {
        //         logging: true, 
        //         letterRendering: 1, 
        //         allowTaint: true,
        //         useCORS: true,
        //         //backgroundColor: '#faaa00'
        //     }).then(function (canvas) {
        //         var anchorTag = document.createElement("a");
        //         document.body.appendChild(anchorTag);
        //         document.getElementById("previewImg").appendChild(canvas);			
        //         anchorTag.download = "filename.jpg";
        //         anchorTag.href = canvas.toDataURL();
        //         anchorTag.target = '_blank';
        //         anchorTag.click();
        //     });
        // });
        $('body').on('click', '.download-btn', function () {
            $('#downloadModal').modal({
                backdrop: 'static',
                keyboard: false
            });
        }); 
    });

    //https://html2canvas.hertzen.com/configuration
</script>
</body>
</html>
